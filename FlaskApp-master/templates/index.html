<!--
    The home page of the website that shows the list of available games,
    and game features like 'Quick Join' and 'Create New Game'
-->

{% extends "page_template.html" %}
{% block main_body %}

<span id="alertPlaceholder "></span>

<div id='alert' style="display:none;" class='alert alert-info' role='alert'> No Games available. <button type='button' class='close' data-dismiss='alert'> <span>&times;</span> </button> </div>
<div id='errorAlert' style="display:none;" class='alert alert-info' role='alert'> An Error has Occurred. <button type='button' class='close' data-dismiss='alert'> <span>&times;</span> </button> </div>
<div id='gameCreatedAlert' style="display:none;" class='alert alert-info' role='alert'> New Game Created <button type='button' class='close' data-dismiss='alert'> <span>&times;</span> </button> </div>

<span id="numGames" data="{{numberOfGames}}"></span>

{% macro show_games(a) %}
    <ul class="list-group">
        {% for game in range(numberOfGames) %}
            {% if games[game] == 0 %}
                <li id="{{ game }}" class="list-group-item clearfix" style="color: green;">Game Number: {{ game }}, Number of Players: {{ games[game] }}
                    <a href="/game/{{ game }}">
                        <input gameval='{{ game }}' type="button" class="btn btn-success pull-right" value="Join Game"></input>
                    </a>
                </li>
            {% endif %}
            {% if games[game] == 1 %}
                <li id="{{ game }}" class="list-group-item clearfix" style="color: blue;">Game Number: {{ game }}, Number of Players: {{ games[game] }}
                    <a href="/game/{{ game }}">
                        <input gameval='{{ game }}' type="button" class="btn btn-success pull-right" value="Join Game"></input>
                    </a>
                </li>
            {% endif %}
            {% if games[game] == 2 %}
                <li id="{{ game }}" class="list-group-item clearfix" style="color: red;">Game Number: {{ game }}, Number of Players: {{ games[game] }}
                    <a href="/spectate/{{ game }}">
                        <input gameval='{{ game }}' type="button" class="btn btn-default pull-right" value="Spectate"></input>
                    </a>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
{% endmacro %}

<!-- Main game loading -->
<div class='container' id="main-div">
    <div id="stuff">
        {{ show_games() }}
    </div>

    <!-- Implementing Create Game Button -->
    <div>
        <input type="button" class="btn btn-primary" value="Join New Game"></input>
        <input type="button" class="btn btn-primary" value="Create New Game"></input>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="/chess-app/static/canvas.js"></script>


{% endblock %}
